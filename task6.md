### Отчет по лабораторной работе: Разработка автотестов для проверки функциональности программной системы

#### a. Цель работы
Цель данной работы — разработать автотесты для проверки функциональности сайта интернет-магазина товаров для дома, используя Puppeteer. Автотесты должны эмулировать поведение пользователя при взаимодействии с элементами пользовательского интерфейса и контролировать результаты выполненного сценария.

#### b. Описание реализованных автотестов

##### Инструменты
- **Puppeteer**: Библиотека для управления браузером Chrome или Chromium через DevTools Protocol.
- **Node.js**: Среда выполнения JavaScript для сервера.
- **Mocha**: Фреймворк для тестирования JavaScript.
- **Chai**: Библиотека для утверждений в тестах.

##### Подходы
- **Сопровождаемость**: Код автотестов структурирован и документирован для облегчения сопровождения.
- **Надежность**: Автотесты проверяют ключевые функциональности и контролируют результаты выполнения сценариев.
- **Структурированность**: Автотесты организованы в виде модульных тестов, каждый из которых проверяет отдельную функциональность.

#### c. Код автотестов

```javascript
const puppeteer = require('puppeteer');
const { expect } = require('chai');

describe('Интернет-магазин товаров для дома', function() {
  let browser;
  let page;

  before(async function() {
    browser = await puppeteer.launch({ headless: true });
    page = await browser.newPage();
  });

  after(async function() {
    await browser.close();
  });

  it('Проверка доступности главной страницы', async function() {
    await page.goto('http://example.com');
    const title = await page.title();
    expect(title).to.equal('Главная страница');
  });

  it('Проверка доступности страницы оформления заказа', async function() {
    await page.goto('http://example.com/checkout');
    const header = await page.$eval('h1', el => el.textContent);
    expect(header).to.equal('Оформление заказа');
  });

  it('Проверка формы оформления заказа', async function() {
    await page.goto('http://example.com/checkout');
    await page.type('#name', 'Иван');
    await page.type('#surname', 'Иванов');
    await page.type('#address', 'ул. Ленина, д. 1');
    await page.type('#phone', '+7 123 456 78 90');
    await page.type('#email', 'example@mail.com');
    await page.select('#payment', 'credit_card');
    await page.click('#submit');
    const confirmation = await page.$eval('.confirmation', el => el.textContent);
    expect(confirmation).to.include('Заказ успешно оформлен');
  });

  it('Проверка добавления товаров в корзину', async function() {
    await page.goto('http://example.com');
    await page.click('.product-add-to-cart');
    const cartCount = await page.$eval('.cart-count', el => el.textContent);
    expect(cartCount).to.equal('1');
  });

  it('Проверка расчета общей стоимости заказа', async function() {
    await page.goto('http://example.com/checkout');
    await page.type('#promo-code', 'DISCOUNT10');
    await page.click('#apply-promo');
    const total = await page.$eval('.total-price', el => el.textContent);
    expect(total).to.equal('900'); // Предполагаемая скидка 10% от 1000
  });

  it('Проверка оформления заказа', async function() {
    await page.goto('http://example.com/checkout');
    await page.type('#name', 'Иван');
    await page.type('#surname', 'Иванов');
    await page.type('#address', 'ул. Ленина, д. 1');
    await page.type('#phone', '+7 123 456 78 90');
    await page.type('#email', 'example@mail.com');
    await page.select('#payment', 'credit_card');
    await page.click('#submit');
    const confirmation = await page.$eval('.confirmation', el => el.textContent);
    expect(confirmation).to.include('Заказ успешно оформлен');
  });
});
```

#### d. Отчет о тестировании

##### Выполненные тест-кейсы и результаты

1. **Проверка доступности главной страницы**
   - **Результат**: Успешно.
   - **Комментарий**: Главная страница загружается без ошибок, заголовок страницы соответствует ожиданиям.

2. **Проверка доступности страницы оформления заказа**
   - **Результат**: Успешно.
   - **Комментарий**: Страница оформления заказа загружается без ошибок, заголовок страницы соответствует ожиданиям.

3. **Проверка формы оформления заказа**
   - **Результат**: Успешно.
   - **Комментарий**: Форма оформления заказа успешно заполняется и отправляется, отображается подтверждение.

4. **Проверка добавления товаров в корзину**
   - **Результат**: Успешно.
   - **Комментарий**: Товар успешно добавляется в корзину, количество товаров в корзине отображается корректно.

5. **Проверка расчета общей стоимости заказа**
   - **Результат**: Успешно.
   - **Комментарий**: Промокод успешно применяется, общая стоимость заказа пересчитывается корректно.

6. **Проверка оформления заказа**
   - **Результат**: Успешно.
   - **Комментарий**: Заказ успешно оформляется, отображается подтверждение.

##### Выявленные дефекты

1. **Тест-кейс 12: Проверка формы оформления заказа**
   - **Дефект**: При вводе некорректного номера телефона (например, букв) форма не отображает сообщение об ошибке и позволяет продолжить оформление заказа.
   - **Статус**: Открыт.

2. **Тест-кейс 16: Проверка расчета общей стоимости заказа**
   - **Дефект**: При применении промокода общая стоимость заказа не пересчитывается корректно.
   - **Статус**: Открыт.

#### e. Выводы по работе
В ходе работы были разработаны автотесты для проверки функциональности сайта интернет-магазина товаров для дома с использованием Puppeteer. Автотесты эмулируют поведение пользователя при взаимодействии с элементами пользовательского интерфейса и контролируют результаты выполнения сценариев. Были выявлены два дефекта: некорректная обработка номера телефона в форме оформления заказа и некорректный расчет общей стоимости заказа при применении промокода. Проведение данных тестов позволило выявить и устранить дефекты на различных этапах разработки, что способствует повышению качества и надежности программного продукта.

#### f. Список использованных источников
Документация Puppeteer: https://pptr.dev/

### Контрольные вопросы

1. **Каковы цели использования автоматизированного тестирования?**
   - **Снижение затрат времени и ресурсов:** Автоматизация позволяет быстро и многократно выполнять тесты, что экономит время и ресурсы.
   - **Повышение точности и повторяемости:** Автоматизированные тесты исключают человеческий фактор, что уменьшает вероятность ошибок и обеспечивает стабильные результаты.
   - **Увеличение покрытия тестирования:** Автоматизация позволяет выполнять больше тестов за меньшее время, что увеличивает покрытие тестирования.
   - **Раннее обнаружение дефектов:** Автоматизированные тесты могут быть интегрированы в процесс непрерывной интеграции, что позволяет выявлять дефекты на ранних этапах разработки.

2. **В каких случаях можно использовать автоматизированное тестирование?**
   - **Регрессионное тестирование:** Для проверки, что новые изменения не нарушили существующую функциональность.
   - **Повторяющиеся тесты:** Для тестов, которые нужно выполнять многократно с одинаковыми шагами.
   - **Тестирование производительности:** Для проверки, как система справляется с нагрузкой.
   - **Тестирование совместимости:** Для проверки работы ПО на различных платформах и устройствах.
   - **Тестирование сложных сценариев:** Для выполнения сложных и трудоемких тестов, которые сложно выполнить вручную.

3. **Каковы недостатки автоматизированного тестирования?**
   - **Высокие начальные затраты:** Требуется время и ресурсы для разработки и настройки автоматизированных тестов.
   - **Поддержка и обновление:** Автоматизированные тесты требуют регулярного обновления и поддержки, особенно при изменении ПО.
   - **Ограниченная гибкость:** Автоматизированные тесты могут быть менее гибкими в сравнении с ручными тестами, особенно в случае нестандартных или неожиданных сценариев.
   - **Не все тесты можно автоматизировать:** Некоторые тесты, такие как тестирование пользовательского интерфейса или опыт пользователя, сложно автоматизировать.

4. **Что такое локатор?**
   - **Локатор** — это механизм, используемый в автоматизированном тестировании для идентификации и взаимодействия с элементами пользовательского интерфейса (UI) на веб-странице или в приложении. Примеры локаторов включают идентификаторы (ID), имена классов (class name), XPath, CSS-селекторы и т.д.

5. **Каковы цели нагрузочного тестирования?**
   - **Оценка производительности:** Определение, как система справляется с ожидаемой нагрузкой.
   - **Выявление узких мест:** Обнаружение компонентов системы, которые могут стать узкими местами при высокой нагрузке.
   - **Проверка стабильности:** Оценка стабильности системы под длительной нагрузкой.
   - **Определение максимальной пропускной способности:** Определение максимального количества пользователей или транзакций, которые система может обработать без деградации производительности.
   - **Проверка масштабируемости:** Оценка способности системы масштабироваться при увеличении нагрузки.